<!DOCTYPE html>
<html>

<head>
  <title>
    Rock Paper Scissors
  </title>
  <link rel="stylesheet" href="rock-paper-scissors.css">
</head>

<body>
  <p>
    Rock Paper Scissors
  </p>
  <div class="moves">
    <button class="move-button" onclick="
      playGame('rock');
    ">
      <img class="move-img" src="move-images/rock-emoji.png">
    </button>
    <button class="move-button" onclick="
      playGame('paper');
    "> <img class="move-img" src="move-images/paper-emoji.png"> </button>
    <button class="move-button" onclick="
      playGame('scissors');
    "> <img class="move-img" src="move-images/scissors-emoji.png"> </button>
  </div>

  <button onclick="
    updateScore('reset');
  "> Reset Score </button>


  <script>

    let score = JSON.parse(localStorage.getItem('score')) || {wins:0, losses:0, ties:0};
    console.log(score);

    function playGame(playerMove){
      const compMove = playCompMove();
      let result = '';
      if(playerMove === 'rock'){
        if(compMove === 'rock'){
          result = `It's a tie!`;
        }
        else if(compMove === 'paper'){
          result = 'You Lose!';
        }
        else{
          result = 'You Win!';
        }        
      }
      else if(playerMove === 'paper'){
        if(compMove === 'paper'){
        result = `It's a tie!`;
        }
        else if(compMove === 'scissors'){
          result = 'You Lose!';
        }
        else{
          result = 'You Win!';
        }
      }
      else{
        if(compMove === 'scissors'){
          result = `It's a tie!`;
        }
        else if(compMove === 'rock'){
          result = 'You Lose!';
        }
        else{
          result = 'You Win!';
        }
      }
      updateScore(result);
      console.log(`Computer picked ${compMove}. You picked ${playerMove}. ${result}`);
      console.log(score);
    }

    function updateScore(result){
      if(result === 'reset'){
        score = {wins:0, losses: 0, ties: 0};
        console.log('Score reset');
        console.log(score);
        localStorage.removeItem('score');
        return;
      }
      if(result === `It's a tie!`){
        score.ties++;
      }
      else if(result === 'You Win!'){
        score.wins++;
      }
      else{
        score.losses++;
      }
      localStorage.setItem('score',JSON.stringify(score));
    }

    function playCompMove(){
      randomNumber = Math.random();
      let compMove = '';
      if(randomNumber < 1/3){
        compMove = 'rock';
      }
      else if(randomNumber >= 1/3 && randomNumber < 2/3){
        compMove = 'paper';
      }
      else{
        compMove = 'scissors';
      }
      return compMove;
    }

    
  </script>
</body>

</html>